# Telegram Bot ‚Äî –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π –ë–æ—Ç —Å –ú–µ–Ω—é –∏ –û–ø–ª–∞—Ç–æ–π

–≠—Ç–æ—Ç –±–æ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ –±–∞–∑–µ `Aiogram 3.x` –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ–Ω—é
- –ì–∞–ª–µ—Ä–µ—é –ø—Ä–∏–º–µ—Ä–æ–≤
- –ö–∞—Ç–∞–ª–æ–≥ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ–ø–ª–∞—Ç—ã
- –ü–æ–∫—É–ø–∫—É –ø–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ Telegram Payments
- –ü–æ–¥–¥–µ—Ä–∂–∫—É FSM –∏ `ChatAction.TYPING` –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –Ω–∞–±–æ—Ä–∞

---

## üì¶ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- `/start` ‚Äî –∑–∞–ø—É—Å–∫ –º–µ–Ω—é —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º
- Inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –û–ø–ª–∞—Ç–∞ —Å –ø–æ–º–æ—â—å—é Card, Stripe, Lava
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Invoice (`LabeledPrice`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ "–Ω–∞–±–∏—Ä–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ..."

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bot/
‚îú‚îÄ‚îÄ bot.py                 # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îî‚îÄ‚îÄ user_handlers.py   # –û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îú‚îÄ‚îÄ keyboards/buttons.py   # –ö–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ sourcefile/
‚îÇ   ‚îú‚îÄ‚îÄ texts.py           # –¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ pictures.py        # –ü—É—Ç–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
‚îú‚îÄ‚îÄ controllers.py         # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ states.py              # FSM-—Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ callbacks.py           # Callback-–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ filters.py             # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
‚îú‚îÄ‚îÄ types.py               # –î–æ–ø. —Ç–∏–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, NavigationHistory)
config.py                  # –ö–æ–Ω—Ñ–∏–≥
models.py                  # ORM-–º–æ–¥–µ–ª—å User
main.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
logger.py                  # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/chelush/cheese_bot.git
cd telegram-bot
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

### 3. –°–æ–∑–¥–∞–π `.env`

```python
TELEGRAM_BOT_TOKEN=<TELEGRAM_TOKEN>

POSTGRES_HOST=
POSTGRES_PORT=
POSTGRES_DB=
POSTGRES_USER=
POSTGRES_PASSWORD=
```

### 4. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞

```bash
python main.py
```

---

## üê≥ Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
docker build -t telegram-bot .
docker run --env-file .env telegram-bot
```

---

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ

- Python 3.12+
- Aiogram 3.x
- Telegram Bot API
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `@with_typing`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ø–µ—á–∞—Ç–∞–µ—Ç...", –ø—Ä–µ–∂–¥–µ —á–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –¥–ª—è –±–æ–ª–µ–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ UX.

FSM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∑–∞–∫–∞–∑–∞–º–∏.

---

## üßë –ê–≤—Ç–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–º –ù–ò–£ –í–®–≠ ‚ù§Ô∏è